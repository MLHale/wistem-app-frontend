{{#paper-expansion-panel expanded=true as |panel|}}
  {{#panel.collapsed}}
    <div class="md-panel-title">Search for awards</div>
    {{paper-icon "keyboard_arrow_down"}}
  {{/panel.collapsed}}

  {{#panel.expanded as |expanded|}}
    {{#expanded.header}}
      <div class="md-panel-title">Search for awards</div>
      {{paper-icon "keyboard_arrow_up"}}
    {{/expanded.header}}

    {{#expanded.content}}
      <div class="layout-row">
        {{paper-input class="flex" label="Award Title" value=title onChange=(action (mut title))}}
        <div class="flex-30">
          Filter by stem field:
          {{#power-select-multiple options=model.stemfields selected=stemfield placeholder="Select stem fields..." onchange=(action (mut stemfield)) as |stemfields|}}
            {{stemfields}}
          {{/power-select-multiple}}
        </div>
        <div class="flex-30">
          Filter by who can apply:
          {{#power-select-multiple options=model.applicanttype selected=applicanttype placeholder="Select applicant types..." onchange=(action (mut applicanttype)) as |applicant|}}
            {{applicant}}
          {{/power-select-multiple}}
        </div>
      </div>
      {{#paper-expansion-panel as |advsearch|}}
        {{#advsearch.collapsed}}
          <div class="md-panel-title">Advanced search</div>
          {{paper-icon "keyboard_arrow_down"}}
        {{/advsearch.collapsed}}

        {{#advsearch.expanded as |expanded|}}
          {{#expanded.header}}
            <div class="md-panel-title">Advanced search</div>
            {{paper-icon "keyboard_arrow_up"}}
          {{/expanded.header}}

          {{#expanded.content}}
            <div class="layout-row">
              {{paper-input class="flex" label="Description" value=description onChange=(action (mut description))}}
              {{paper-input class="flex" label="Award URL" value=awardurl onChange=(action (mut awardurl))}}
              {{paper-input class="flex" label="Sponsor" value=sponsor onChange=(action (mut sponsor))}}
            </div>
            <div class="layout-row">
              {{#power-select-multiple class="flex" options=model.awardsources selected=awardsources placeholder="Sources" onchange=(action (mut awardsources)) as |awardsource|}}
                {{awardsource}}
              {{/power-select-multiple}}
              {{#power-select-multiple class="flex" options=model.awardpurpose selected=awardpurpose placeholder="Purpose" onchange=(action (mut awardpurpose)) as |purpose|}}
                {{purpose}}
              {{/power-select-multiple}}
            </div>
          {{/expanded.content}}
        {{/advsearch.expanded}}
      {{/paper-expansion-panel}}
    {{/expanded.content}}
    {{#expanded.footer}}
        {{#paper-button accent=true class="flex" onClick=(action "search")}}Find Awards{{/paper-button}}
    {{/expanded.footer}}
  {{/panel.expanded}}
{{/paper-expansion-panel}}

{{#paper-list}}
  {{#each model.awards as |item|}}
    {{#paper-item onClick=(action "openDialog" item)}}
      {{award-listing item=item}}
    {{/paper-item}}
  {{/each}}
{{/paper-list}}


{{#if showDialog}}
  {{#paper-dialog class="flex-77" onClose=(action "closeDialog" "cancel") origin=dialogOrigin clickOutsideToClose=true}}
    {{#paper-toolbar}}
      {{#paper-toolbar-tools}}
        <h2>{{selectedAward.title}}</h2>
        <span class="flex"></span>
        {{#paper-button iconButton=true onClick=(action "closeDialog" "cancel")}}{{paper-icon icon="close"}}{{/paper-button}}
      {{/paper-toolbar-tools}}
    {{/paper-toolbar}}

    {{#paper-dialog-content}}
      {{award-display selectedAward=selectedAward}}
    {{/paper-dialog-content}}

    {{#paper-dialog-actions class="layout-row"}}
      <span class="flex"></span>
      {{#paper-button onClick=(action "closeDialog" "ok")}}OK{{/paper-button}}
    {{/paper-dialog-actions}}
  {{/paper-dialog}}
{{/if}}
